<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>NOVA 판단/감정 실시간 UI</title>
  <style>
    body {
      margin:0;
      font-family: "Pretendard", "Noto Sans KR", "Inter", sans-serif;
      background: linear-gradient(#0d1b2a, #1b263b);
      color:#fff;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .wrapper {
      width:90%;
      max-width:600px;
    }
    .card {
      background:rgba(0,0,0,0.35);
      padding:20px 30px;
      border-radius:8px;
      box-shadow:0 4px 10px rgba(0,0,0,0.4);
    }
    .section {
      margin:15px 0;
      color:#7dd3fc;
    }
    .fade-pulse {
      animation: fadePulse 0.6s ease-in-out;
    }
    @keyframes fadePulse {
      0% {opacity:0; box-shadow:0 0 0px #7dd3fc;}
      50% {opacity:1; box-shadow:0 0 10px #7dd3fc;}
      100% {box-shadow:0 0 0px transparent;}
    }
    .timeline div {margin-bottom:5px;}
  </style>
</head>
<body>
<div class="wrapper">
  <div class="card" tabindex="0">
    <div id="market-emotion" class="section">-</div>
    <div id="action" class="section">-</div>
    <div id="reason" class="section">-</div>
    <div id="score" class="section">-</div>
    <div id="log" class="section timeline">-</div>
  </div>
</div>
<script>
function fetchDecision() {
  fetch('/api/decision')
    .then(res => res.json())
    .then(data => {
      document.getElementById('market-emotion').textContent = data.classified_emotion ?? '-';
      document.getElementById('action').textContent = data.action ?? '-';
      document.getElementById('reason').textContent = data.reason ?? '-';
      document.getElementById('score').textContent = data.score_vs_human ?? '-';
      document.getElementById('log').textContent = `${data.time ?? ''} | ${data.action ?? ''} | ${data.reason ?? ''}`;
      document.querySelector('.card').classList.add('fade-pulse');
      setTimeout(()=>document.querySelector('.card').classList.remove('fade-pulse'),600);
    })
    .catch(err => console.error('NOVA 판단 정보 수신 실패:', err));
}
fetchDecision();
setInterval(fetchDecision, 2000);
</script>
</body>
</html>
